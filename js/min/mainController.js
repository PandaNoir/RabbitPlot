var appName="rabbit",MEMO_LIMIT=1950,QUOTATION=0,isSmartPhone=0<navigator.userAgent.indexOf("iPhone")&&-1==navigator.userAgent.indexOf("iPad")||0<navigator.userAgent.indexOf("iPod")||0<navigator.userAgent.indexOf("Android");
angular.module(appName,["ngTouch","ngAnimate","ngMaterial","ngMessages"]).controller("mainController",["$scope","eventForm","calF","eventCal","eventListToEdit","$timeout","$filter","$sce",function(a,c,d,e,b,g,f,h){a._=_;a.eventForm=c;a.calF=d;a.eventListToEdit=b;a.eventForm.isEditMode=!1;a.showsHowToWrite=!1;a.showsSetting=!1;a.showsDialog=!1;a.showsDialogButton=!1;a.showsInputDialog=!1;a.dialogMessage="";a.dialogInputValue="";a.showHowToWrite=function(){a.showsHowToWrite=!a.showsHowToWrite};a.splitSelector=
e.splitSelector;var k=angular.noop;a.calF.selected=a.calF.date;a.eventCalendar=e.eventCalendar;a.dialog=function(){var b=Array.prototype.slice.call(arguments),c,e,d,f,h,l,m;a.locked||(1===b.length?angular.isString(b[0])?c=b[0]:(c=b[0].mes,e=b[0].val||"",d=angular.isUndefined(b[0].showsDialog)?!1:b[0].showsDialog,f=angular.isUndefined(b[0].showsInputDialog)?!1:b[0].showsInputDialog,!1===d&&!1===f&&(d=!0),angular.isUndefined(b[0].dialogType)||("dialog"===b[0].dialogType?(d=!0,f=!1):"input"===b[0].dialogType&&
(d=!1,f=!0)),m=b[0].locked||!1,l=b[0].focus,h=b[0].time,k=b[0].callback||angular.noop):2===b.length&&(c=b[0],h=b[1]),a.showsDialog=d,a.showsInputDialog=f,a.focus=l,a.locked=m,angular.isString(c)?a.dialogMessage=c:a.dialogMessage=angular.toJson(c),angular.isString(e)?a.dialogInputValue=e:a.dialogInputValue=angular.toJson(e),!0!==h?(a.showsDialogButton=!1,g(function(){a.showsDialog=!1;a.showsInputDialog=!1;a.locked=!1},h||800)):a.showsDialogButton=!0,console.log(a))};a.hideDialog=function(){k(a.dialogInputValue);
a.showsDialog=!1;a.showsInputDialog=!1;a.locked=!1}}]).config(["$httpProvider",function(a){a.defaults.transformRequest=function(a){if(void 0===a)return a;if(angular.isObject(a)){var d=[],e;for(e in a)if(a.hasOwnProperty(e)){var b=a[e];d[d.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==b?"":b)}a=d.join("&").replace(/%20/g,"+")}else a=null==a?"":a.toString();return a};a.defaults.headers.post={"Content-Type":"application/x-www-form-urlencoded"}}]).filter("format",["group","user",function(a,
c){return function(d,e){d=d.split(":");var b="",b="private"==d[1]?c["private"][d[2]][d[0]].name:a[d[1]][d[2]][d[0]].name;!1!==e&&0===b.indexOf("[mes]")&&(b=b.replace(/^\[mes\]/,""));return b}}]).run(["db","group","$rootScope",function(a,c,d){var e={id:0,event:[{name:"[mes]\u6625\u5206\u306e\u65e5",year:2E3,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2E3,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2001,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2001,
month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2002,month:2,date:21},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2002,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2003,month:2,date:21},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2003,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2004,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2004,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2005,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",
year:2005,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2006,month:2,date:21},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2006,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2007,month:2,date:21},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2007,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2008,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2008,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2009,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",
year:2009,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2010,month:2,date:21},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2010,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2011,month:2,date:21},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2011,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2012,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2012,month:8,date:22},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2013,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",
year:2013,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2014,month:2,date:21},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2014,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2015,month:2,date:21},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2015,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2016,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2016,month:8,date:22},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2017,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",
year:2017,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2018,month:2,date:21},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2018,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2019,month:2,date:21},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2019,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2020,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2020,month:8,date:22},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2021,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",
year:2021,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2022,month:2,date:21},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2022,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2023,month:2,date:21},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2023,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2024,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2024,month:8,date:22},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2025,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",
year:2025,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2026,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2026,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2027,month:2,date:21},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2027,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2028,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2028,month:8,date:22},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2029,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",
year:2029,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2030,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2030,month:8,date:23},{name:"[mes]\u5341\u4e94\u591c",year:2E3,month:8,date:12},{name:"[mes]\u5341\u4e94\u591c",year:2001,month:9,date:1},{name:"[mes]\u5341\u4e94\u591c",year:2002,month:8,date:21},{name:"[mes]\u5341\u4e94\u591c",year:2003,month:8,date:11},{name:"[mes]\u5341\u4e94\u591c",year:2004,month:8,date:28},{name:"[mes]\u5341\u4e94\u591c",year:2005,month:8,date:18},
{name:"[mes]\u5341\u4e94\u591c",year:2006,month:9,date:6},{name:"[mes]\u5341\u4e94\u591c",year:2007,month:8,date:25},{name:"[mes]\u5341\u4e94\u591c",year:2008,month:8,date:14},{name:"[mes]\u5341\u4e94\u591c",year:2009,month:9,date:3},{name:"[mes]\u5341\u4e94\u591c",year:2010,month:8,date:22},{name:"[mes]\u5341\u4e94\u591c",year:2011,month:8,date:12},{name:"[mes]\u5341\u4e94\u591c",year:2012,month:8,date:30},{name:"[mes]\u5341\u4e94\u591c",year:2013,month:8,date:19},{name:"[mes]\u5341\u4e94\u591c",
year:2014,month:8,date:8},{name:"[mes]\u5341\u4e94\u591c",year:2015,month:8,date:27},{name:"[mes]\u5341\u4e94\u591c",year:2016,month:8,date:15}],habit:[{name:"[mes]\u5143\u65e6",selector:"month:1 date:1"},{name:"[mes]\u6210\u4eba\u306e\u65e5",selector:"month:1 day:2nd-mon"},{name:"[mes]\u662d\u548c\u306e\u65e5",selector:"month:4 date:29"},{name:"[mes]\u5efa\u56fd\u8a18\u5ff5\u65e5",selector:"month:2 date:11"},{name:"[mes]\u61b2\u6cd5\u8a18\u5ff5\u65e5",selector:"month:5 date:3"},{name:"[mes]\u307f\u3069\u308a\u306e\u65e5",
selector:"month:5 date:4"},{name:"[mes]\u3053\u3069\u3082\u306e\u65e5",selector:"month:5 date:5"},{name:"[mes]\u6d77\u306e\u65e5",selector:"month:7 day:3rd-mon"},{name:"[mes]\u656c\u8001\u306e\u65e5",selector:"month:9 day:3rd-mon"},{name:"[mes]\u4f53\u80b2\u306e\u65e5",selector:"month:10 day:2nd-mon"},{name:"[mes]\u6587\u5316\u306e\u65e5",selector:"month:11 date:3"},{name:"[mes]\u52e4\u52b4\u611f\u8b1d\u306e\u65e5",selector:"month:11 date:23"},{name:"[mes]\u5929\u7687\u8a95\u751f\u65e5",selector:"month:12 date:23"}],
name:"\u795d\u65e5",updated:!0};localStorage&&localStorage.getItem("group")&&(c.length=0,Array.prototype.push.apply(c,angular.fromJson(localStorage.getItem("group"))),c[0]=_.clone(e));a.list().then(function(b){b=b.data;for(var g=0,f=b.length;g<f;g++){for(var h in b[g])b[g][h]=angular.fromJson(b[g][h]);b[g].updated=!0}b.sort(function(a,b){return a.id-b.id});g=c.length=0;for(f=b.length;g<f;g++)c[b[g].id]=b[g];c[0]=_.clone(e);d.$broadcast("updated");localStorage.setItem("group",angular.toJson(c));a.getNameList().then(function(a){for(var b=
0,d=a.data[0].length;b<d;b++)c[b]||(c[b]={name:angular.fromJson(a.data[0][b])},a.data[1][b]&&(c[b].parents=angular.fromJson(a.data[1][b])));c[0]=_.clone(e);localStorage.setItem("group",angular.toJson(c))})})}]).directive("appDate",[function(){return{scope:{row:"=appRow"},restrict:"A",template:'<span class="date" ng-transclude></span>',transclude:!0,replace:!0,controller:["$scope","calF","eventCal","$filter",function(a,c,d,e){a.calendar=c;a.bookedClass=function(a){a=d.eventCalendar(a);for(var c=0,
f=0,h=a.length;f<h;f++)0!==e("format")(a[f],!1).indexOf("[mes]")&&c++;return 5>c?"booked-"+c:"booked-5"};a.dateClass=function(b){if(0!==b&&32!==b){var c=a.calendar,d=[];c.selected===b&&(d[d.length]="selected");d[d.length]=a.bookedClass(b);b===c.today.date&&c.month===c.today.month&&c.year===c.today.year&&(d[d.length]="today");return d}return[]}}],link:function(a,c,d){var e=a.row[d.appDate];if(""!==e&&void 0!==e){var b=function(){c.removeClass("selected booked-0 booked-1 booked-2 booked-3 booked-4 booked-5 today");
c.addClass(a.dateClass(e).join(" "))};a.$on("updated",b);b();c.on("mouseenter",function(){!a.calendar.disableHoverEvent&&e&&(a.calendar.selected=e,angular.element(document.querySelectorAll(".selected")).removeClass("selected"),b(),a.$apply())});c.on("mouseleave",function(){a.calendar.disableHoverEvent||(a.calendar.selected=null,angular.element(document.querySelectorAll(".selected")).removeClass("selected"),a.$apply())});c.on("click",function(){isSmartPhone||(a.calendar.disableHoverEvent=a.calendar.selected===
e?!a.calendar.disableHoverEvent:!0);a.calendar.selected=e;angular.element(document.querySelectorAll(".selected")).removeClass("selected");b();a.$apply()})}}}}]);
