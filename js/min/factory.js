angular.module(appName).factory("user",["$rootScope",function(c){if(localStorage&&angular.fromJson(localStorage.getItem("private"))){var d=angular.fromJson(localStorage.getItem("private"));d.isHiddenGroup=function(a){return-1!==_.indexOf(this.hiddenGroup,a,!0)};d.save=function(){c.$broadcast("updated");localStorage.setItem("private",angular.toJson(this))};d.updated=!0}else d={following:[],"private":{event:[],habit:[],name:"\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8"},hiddenGroup:[],isHiddenGroup:function(a){return-1!==
_.indexOf(this.hiddenGroup,a,!0)},save:function(){c.$broadcast("updated");localStorage.setItem("private",angular.toJson(this))}};d.save();return d}]).factory("eventForm",function(){return{isEditMode:!1,name:"",year:(new Date).getFullYear(),month:(new Date).getMonth()+1,date:(new Date).getDate(),type:"event",rule:""}}).factory("groupForm",function(){return{name:""}}).factory("group",["$http",function(c){return[{id:0,event:[{name:"\u6625\u5206\u306e\u65e5",year:2E3,month:2,date:20},{name:"\u79cb\u5206\u306e\u65e5",
year:2E3,month:8,date:23},{name:"\u6625\u5206\u306e\u65e5",year:2001,month:2,date:20},{name:"\u79cb\u5206\u306e\u65e5",year:2001,month:8,date:23},{name:"\u6625\u5206\u306e\u65e5",year:2002,month:2,date:21},{name:"\u79cb\u5206\u306e\u65e5",year:2002,month:8,date:23},{name:"\u6625\u5206\u306e\u65e5",year:2003,month:2,date:21},{name:"\u79cb\u5206\u306e\u65e5",year:2003,month:8,date:23},{name:"\u6625\u5206\u306e\u65e5",year:2004,month:2,date:20},{name:"\u79cb\u5206\u306e\u65e5",year:2004,month:8,date:23},
{name:"\u6625\u5206\u306e\u65e5",year:2005,month:2,date:20},{name:"\u79cb\u5206\u306e\u65e5",year:2005,month:8,date:23},{name:"\u6625\u5206\u306e\u65e5",year:2006,month:2,date:21},{name:"\u79cb\u5206\u306e\u65e5",year:2006,month:8,date:23},{name:"\u6625\u5206\u306e\u65e5",year:2007,month:2,date:21},{name:"\u79cb\u5206\u306e\u65e5",year:2007,month:8,date:23},{name:"\u6625\u5206\u306e\u65e5",year:2008,month:2,date:20},{name:"\u79cb\u5206\u306e\u65e5",year:2008,month:8,date:23},{name:"\u6625\u5206\u306e\u65e5",
year:2009,month:2,date:20},{name:"\u79cb\u5206\u306e\u65e5",year:2009,month:8,date:23},{name:"\u6625\u5206\u306e\u65e5",year:2010,month:2,date:21},{name:"\u79cb\u5206\u306e\u65e5",year:2010,month:8,date:23},{name:"\u6625\u5206\u306e\u65e5",year:2011,month:2,date:21},{name:"\u79cb\u5206\u306e\u65e5",year:2011,month:8,date:23},{name:"\u6625\u5206\u306e\u65e5",year:2012,month:2,date:20},{name:"\u79cb\u5206\u306e\u65e5",year:2012,month:8,date:22},{name:"\u6625\u5206\u306e\u65e5",year:2013,month:2,date:20},
{name:"\u79cb\u5206\u306e\u65e5",year:2013,month:8,date:23},{name:"\u6625\u5206\u306e\u65e5",year:2014,month:2,date:21},{name:"\u79cb\u5206\u306e\u65e5",year:2014,month:8,date:23},{name:"\u6625\u5206\u306e\u65e5",year:2015,month:2,date:21},{name:"\u79cb\u5206\u306e\u65e5",year:2015,month:8,date:23},{name:"\u6625\u5206\u306e\u65e5",year:2016,month:2,date:20},{name:"\u79cb\u5206\u306e\u65e5",year:2016,month:8,date:22},{name:"\u6625\u5206\u306e\u65e5",year:2017,month:2,date:20},{name:"\u79cb\u5206\u306e\u65e5",
year:2017,month:8,date:23},{name:"\u6625\u5206\u306e\u65e5",year:2018,month:2,date:21},{name:"\u79cb\u5206\u306e\u65e5",year:2018,month:8,date:23},{name:"\u6625\u5206\u306e\u65e5",year:2019,month:2,date:21},{name:"\u79cb\u5206\u306e\u65e5",year:2019,month:8,date:23},{name:"\u6625\u5206\u306e\u65e5",year:2020,month:2,date:20},{name:"\u79cb\u5206\u306e\u65e5",year:2020,month:8,date:22},{name:"\u6625\u5206\u306e\u65e5",year:2021,month:2,date:20},{name:"\u79cb\u5206\u306e\u65e5",year:2021,month:8,date:23},
{name:"\u6625\u5206\u306e\u65e5",year:2022,month:2,date:21},{name:"\u79cb\u5206\u306e\u65e5",year:2022,month:8,date:23},{name:"\u6625\u5206\u306e\u65e5",year:2023,month:2,date:21},{name:"\u79cb\u5206\u306e\u65e5",year:2023,month:8,date:23},{name:"\u6625\u5206\u306e\u65e5",year:2024,month:2,date:20},{name:"\u79cb\u5206\u306e\u65e5",year:2024,month:8,date:22},{name:"\u6625\u5206\u306e\u65e5",year:2025,month:2,date:20},{name:"\u79cb\u5206\u306e\u65e5",year:2025,month:8,date:23},{name:"\u6625\u5206\u306e\u65e5",
year:2026,month:2,date:20},{name:"\u79cb\u5206\u306e\u65e5",year:2026,month:8,date:23},{name:"\u6625\u5206\u306e\u65e5",year:2027,month:2,date:21},{name:"\u79cb\u5206\u306e\u65e5",year:2027,month:8,date:23},{name:"\u6625\u5206\u306e\u65e5",year:2028,month:2,date:20},{name:"\u79cb\u5206\u306e\u65e5",year:2028,month:8,date:22},{name:"\u6625\u5206\u306e\u65e5",year:2029,month:2,date:20},{name:"\u79cb\u5206\u306e\u65e5",year:2029,month:8,date:23},{name:"\u6625\u5206\u306e\u65e5",year:2030,month:2,date:20},
{name:"\u79cb\u5206\u306e\u65e5",year:2030,month:8,date:23},{name:"\u5341\u4e94\u591c",year:2E3,month:8,date:12},{name:"\u5341\u4e94\u591c",year:2001,month:9,date:1},{name:"\u5341\u4e94\u591c",year:2002,month:8,date:21},{name:"\u5341\u4e94\u591c",year:2003,month:8,date:11},{name:"\u5341\u4e94\u591c",year:2004,month:8,date:28},{name:"\u5341\u4e94\u591c",year:2005,month:8,date:18},{name:"\u5341\u4e94\u591c",year:2006,month:9,date:6},{name:"\u5341\u4e94\u591c",year:2007,month:8,date:25},{name:"\u5341\u4e94\u591c",
year:2008,month:8,date:14},{name:"\u5341\u4e94\u591c",year:2009,month:9,date:3},{name:"\u5341\u4e94\u591c",year:2010,month:8,date:22},{name:"\u5341\u4e94\u591c",year:2011,month:8,date:12},{name:"\u5341\u4e94\u591c",year:2012,month:8,date:30},{name:"\u5341\u4e94\u591c",year:2013,month:8,date:19},{name:"\u5341\u4e94\u591c",year:2014,month:8,date:8},{name:"\u5341\u4e94\u591c",year:2015,month:8,date:27},{name:"\u5341\u4e94\u591c",year:2016,month:8,date:15}],habit:[{name:"\u5143\u65e6",selector:"month:1 date:1"},
{name:"\u6210\u4eba\u306e\u65e5",selector:"month:1 day:2nd-mon"},{name:"\u662d\u548c\u306e\u65e5",selector:"month:4 date:29"},{name:"\u5efa\u56fd\u8a18\u5ff5\u65e5",selector:"month:2 date:11"},{name:"\u61b2\u6cd5\u8a18\u5ff5\u65e5",selector:"month:5 date:3"},{name:"\u307f\u3069\u308a\u306e\u65e5",selector:"month:5 date:4"},{name:"\u3053\u3069\u3082\u306e\u65e5",selector:"month:5 date:5"},{name:"\u6d77\u306e\u65e5",selector:"month:7 day:3rd-mon"},{name:"\u656c\u8001\u306e\u65e5",selector:"month:9 day:3rd-mon"},
{name:"\u4f53\u80b2\u306e\u65e5",selector:"month:10 day:2nd-mon"},{name:"\u6587\u5316\u306e\u65e5",selector:"month:11 date:3"},{name:"\u52e4\u52b4\u611f\u8b1d\u306e\u65e5",selector:"month:11 date:23"},{name:"\u5929\u7687\u8a95\u751f\u65e5",selector:"month:12 date:23"}],name:"\u4f11\u65e5",updated:!0}]}]).factory("calF",function(){var c=new Date,d={};return{year:c.getFullYear(),month:c.getMonth(),date:c.getDate(),calendar:function(a,e){if(d[a+"/"+e])return d[a+"/"+e];var b=new Date(a,e,1),c=[31,28,
31,30,31,30,31,31,30,31,30,31][e];1===e&&(0==a%4&&0!=a%100||0==a%400)&&(c=29);var g=[];g.year=a;g.month=e;var f=0,b=b.getDay();for(;;){for(var h=[],k=1;7>=k;k++)h[h.length]=0<f+k-b&&f+k-b<=c?f+k-b:"";g[g.length]=h;if(""===h[h.length-1])break;f+=7}return d[a+"/"+e]=g},today:{year:c.getFullYear(),month:c.getMonth(),date:c.getDate()},selected:c.getDate(),selectedDay:function(){return null==this.selected?"":"\u65e5\u6708\u706b\u6c34\u6728\u91d1\u571f".split("")[(new Date(this.year,this.month,this.selected)).getDay()]},
disableHoverEvent:0<navigator.userAgent.indexOf("iPhone")&&-1==navigator.userAgent.indexOf("iPad")||0<navigator.userAgent.indexOf("iPod")||0<navigator.userAgent.indexOf("Android")}}).run(["$timeout",function(c){function d(){var a=new Date;a.setDate(a.getDate()+1);a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);var b=new Date;$scope.calF.today.year=b.getFullYear();$scope.calF.today.month=b.getMonth();$scope.calF.today.date=b.getDate();c(d,a-new Date)}var a=new Date;a.setDate(a.getDate()+
1);a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);c(d,a-new Date)}]).factory("db",["group","user","$http","$rootScope",function(c,d,a,e){return{post:function(b,c,d){b=_.clone(b);b.id=c;b.permission=b.permission||[];b.parents=b.parents||"";delete b.updated;for(var f in b)b[f]=angular.toJson(b[f]);b.type=d;e.$broadcast("updated");return a.post("http://www40.atpages.jp/chatblanc/genderC/database.php",b).success(function(a){console.log("updated");console.log(a)}).error(function(a){console.log(a)})},
list:function(){return a.post("http://www40.atpages.jp/chatblanc/genderC/database.php",{type:"list",groupID:d.following.join(",")}).success(function(a){return a}).error(function(a){console.log(a)})},getNameList:function(){return a.post("http://www40.atpages.jp/chatblanc/genderC/database.php",{type:"namelist"}).success(function(a){return a})}}}]);
