var appName="rabbit",MEMO_LIMIT=1950,QUOTATION=0,isSmartPhone=0<navigator.userAgent.indexOf("iPhone")&&-1==navigator.userAgent.indexOf("iPad")||0<navigator.userAgent.indexOf("iPod")||0<navigator.userAgent.indexOf("Android");
angular.module(appName,["ngTouch","ngAnimate","ngMaterial","ngMessages"]).controller("mainController",["$scope","eventForm","calF","eventCal","eventListToEdit","$timeout","$filter","$sce","$mdSidenav",function(a,d,e,c,b,h,g,k,m){a._=_;a.eventForm=d;a.calF=e;a.eventListToEdit=b;a.eventForm.isEditMode=!1;a.showsHowToWrite=!1;a.showHowToWrite=function(){a.showsHowToWrite=!a.showsHowToWrite};a.splitSelector=c.splitSelector;a.openNav=function(){m("left").toggle()};a.calF.selected=a.calF.date;a.eventCalendar=
c.eventCalendar}]).config(["$httpProvider",function(a){a.defaults.transformRequest=function(a){if(void 0===a)return a;if(angular.isObject(a)){var e=[],c;for(c in a)if(a.hasOwnProperty(c)){var b=a[c];e[e.length]=encodeURIComponent(c)+"="+encodeURIComponent(null==b?"":b)}a=e.join("&").replace(/%20/g,"+")}else a=null==a?"":a.toString();return a};a.defaults.headers.post={"Content-Type":"application/x-www-form-urlencoded"}}]).filter("format",["group","user",function(a,d){return function(e,c){e=e.split(":");
var b="",b="private"==e[1]?d["private"][e[2]][e[0]].name:a[e[1]][e[2]][e[0]].name;!1!==c&&0===b.indexOf("[mes]")&&(b=b.replace(/^\[mes\]/,""));return b}}]).run(["db","group","$rootScope",function(a,d,e){var c={id:0,event:[{name:"[mes]\u6625\u5206\u306e\u65e5",year:2E3,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2E3,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2001,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2001,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",
year:2002,month:2,date:21},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2002,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2003,month:2,date:21},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2003,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2004,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2004,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2005,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2005,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",
year:2006,month:2,date:21},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2006,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2007,month:2,date:21},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2007,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2008,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2008,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2009,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2009,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",
year:2010,month:2,date:21},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2010,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2011,month:2,date:21},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2011,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2012,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2012,month:8,date:22},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2013,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2013,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",
year:2014,month:2,date:21},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2014,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2015,month:2,date:21},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2015,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2016,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2016,month:8,date:22},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2017,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2017,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",
year:2018,month:2,date:21},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2018,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2019,month:2,date:21},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2019,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2020,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2020,month:8,date:22},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2021,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2021,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",
year:2022,month:2,date:21},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2022,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2023,month:2,date:21},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2023,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2024,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2024,month:8,date:22},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2025,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2025,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",
year:2026,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2026,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2027,month:2,date:21},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2027,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2028,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2028,month:8,date:22},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2029,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2029,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",
year:2030,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2030,month:8,date:23},{name:"[mes]\u5341\u4e94\u591c",year:2E3,month:8,date:12},{name:"[mes]\u5341\u4e94\u591c",year:2001,month:9,date:1},{name:"[mes]\u5341\u4e94\u591c",year:2002,month:8,date:21},{name:"[mes]\u5341\u4e94\u591c",year:2003,month:8,date:11},{name:"[mes]\u5341\u4e94\u591c",year:2004,month:8,date:28},{name:"[mes]\u5341\u4e94\u591c",year:2005,month:8,date:18},{name:"[mes]\u5341\u4e94\u591c",year:2006,month:9,date:6},
{name:"[mes]\u5341\u4e94\u591c",year:2007,month:8,date:25},{name:"[mes]\u5341\u4e94\u591c",year:2008,month:8,date:14},{name:"[mes]\u5341\u4e94\u591c",year:2009,month:9,date:3},{name:"[mes]\u5341\u4e94\u591c",year:2010,month:8,date:22},{name:"[mes]\u5341\u4e94\u591c",year:2011,month:8,date:12},{name:"[mes]\u5341\u4e94\u591c",year:2012,month:8,date:30},{name:"[mes]\u5341\u4e94\u591c",year:2013,month:8,date:19},{name:"[mes]\u5341\u4e94\u591c",year:2014,month:8,date:8},{name:"[mes]\u5341\u4e94\u591c",
year:2015,month:8,date:27},{name:"[mes]\u5341\u4e94\u591c",year:2016,month:8,date:15}],habit:[{name:"[mes]\u5143\u65e6",selector:"month:1 date:1"},{name:"[mes]\u6210\u4eba\u306e\u65e5",selector:"month:1 day:2nd-mon"},{name:"[mes]\u662d\u548c\u306e\u65e5",selector:"month:4 date:29"},{name:"[mes]\u5efa\u56fd\u8a18\u5ff5\u65e5",selector:"month:2 date:11"},{name:"[mes]\u61b2\u6cd5\u8a18\u5ff5\u65e5",selector:"month:5 date:3"},{name:"[mes]\u307f\u3069\u308a\u306e\u65e5",selector:"month:5 date:4"},{name:"[mes]\u3053\u3069\u3082\u306e\u65e5",
selector:"month:5 date:5"},{name:"[mes]\u6d77\u306e\u65e5",selector:"month:7 day:3rd-mon"},{name:"[mes]\u656c\u8001\u306e\u65e5",selector:"month:9 day:3rd-mon"},{name:"[mes]\u4f53\u80b2\u306e\u65e5",selector:"month:10 day:2nd-mon"},{name:"[mes]\u6587\u5316\u306e\u65e5",selector:"month:11 date:3"},{name:"[mes]\u52e4\u52b4\u611f\u8b1d\u306e\u65e5",selector:"month:11 date:23"},{name:"[mes]\u5929\u7687\u8a95\u751f\u65e5",selector:"month:12 date:23"}],name:"\u795d\u65e5",updated:!0};localStorage&&localStorage.getItem("group")&&
(d.length=0,Array.prototype.push.apply(d,angular.fromJson(localStorage.getItem("group"))),d[0]=_.clone(c));a.list().then(function(b){b=b.data;for(var h=0,g=b.length;h<g;h++){for(var k in b[h])b[h][k]=angular.fromJson(b[h][k]);b[h].updated=!0}b.sort(function(a,b){return a.id-b.id});h=d.length=0;for(g=b.length;h<g;h++)d[b[h].id]=b[h];d[0]=_.clone(c);e.$broadcast("updated");localStorage.setItem("group",angular.toJson(d));a.getNameList().then(function(a){for(var b=0,e=a.data[0].length;b<e;b++)d[b]||(d[b]=
{name:angular.fromJson(a.data[0][b])},a.data[1][b]&&(d[b].parents=angular.fromJson(a.data[1][b])));d[0]=_.clone(c);localStorage.setItem("group",angular.toJson(d))})})}]).directive("appDate",[function(){return{scope:{row:"=appRow"},restrict:"A",template:'<span class="date" ng-transclude></span>',transclude:!0,replace:!0,controller:["$scope","calF","eventCal","$filter",function(a,d,e,c){a.calendar=d;a.bookedClass=function(a){a=e.eventCalendar(a);for(var d=0,g=0,k=a.length;g<k;g++)0!==c("format")(a[g],
!1).indexOf("[mes]")&&d++;return 5>d?"booked-"+d:"booked-5"};a.dateClass=function(b){if(0!==b&&32!==b){var d=a.calendar,e=[];d.selected===b&&(e[e.length]="selected");e[e.length]=a.bookedClass(b);b===d.today.date&&d.month===d.today.month&&d.year===d.today.year&&(e[e.length]="today");return e}return[]}}],link:function(a,d,e){var c=a.row[e.appDate];if(""!==c&&void 0!==c){var b=function(){d.removeClass("selected booked-0 booked-1 booked-2 booked-3 booked-4 booked-5 today");d.addClass(a.dateClass(c).join(" "))};
a.$on("updated",b);b();d.on("mouseenter",function(){!a.calendar.disableHoverEvent&&c&&(a.calendar.selected=c,angular.element(document.querySelectorAll(".selected")).removeClass("selected"),b(),a.$apply())});d.on("mouseleave",function(){a.calendar.disableHoverEvent||(a.calendar.selected=null,angular.element(document.querySelectorAll(".selected")).removeClass("selected"),a.$apply())});d.on("click",function(){isSmartPhone||(a.calendar.disableHoverEvent=a.calendar.selected===c?!a.calendar.disableHoverEvent:
!0);a.calendar.selected=c;angular.element(document.querySelectorAll(".selected")).removeClass("selected");b();a.$apply()})}}}}]);angular.module(appName).controller("calendar",["$scope","calF","eventForm",function(a,d,e){a.calF=d;a.nextMonth=function(){a.calF.month++;a.calF.selected=null;12<a.calF.month+1&&(a.calF.year+=1,a.calF.month-=12);e.isEditMode=!1};a.lastMonth=function(){a.calF.month--;a.calF.selected=null;1>a.calF.month+1&&(a.calF.year-1<MEMO_LIMIT?(alert(MEMO_LIMIT+"\u5e74\u3088\u308a\u4ee5\u524d\u306f\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306e\u95a2\u4fc2\u3067\u8868\u793a\u3067\u304d\u307e\u305b\u3093\u3002"),
a.calF.month+=1):(a.calF.month+=12,a.calF.year-=1));e.isEditMode=!1};a.nextYear=function(){a.calF.year++;a.calF.selected=null;e.isEditMode=!1};a.lastYear=function(){a.calF.year-1<MEMO_LIMIT?alert(MEMO_LIMIT+"\u5e74\u3088\u308a\u4ee5\u524d\u306f\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306e\u95a2\u4fc2\u3067\u8868\u793a\u3067\u304d\u307e\u305b\u3093\u3002"):(a.calF.year--,a.calF.selected=null);e.isEditMode=!1}}]);angular.module(appName).factory("eventCal",["group","user","calF","$mdToast",function(a,d,e,c){function b(a){c.show(c.simple().content(a).position("top right"));console&&console.error&&console.error(a)}function h(b,e,c){if("private"!==b&&!a[b])return[];var r=[],w=[];"private"===b?(_.each(d.following,function(a){w=w.concat(h(a,e,c))}),r=r.concat(g(d["private"].event,e,c,"private")),w=w.concat(r),r=r.concat(k(d["private"].habit,e,c,"private",w)),d.updated=!1):(a[b].parents&&_.each(a[b].parents,function(a){w=
w.concat(h(a,e,c))}),r=r.concat(g(a[b].event,e,c,b)),w=w.concat(r),r=r.concat(k(a[b].habit,e,c,b,w)),a[b].updated=!1);return r}function g(a,b,d,e){var c=[];if(!a)return c;for(var h=0,r=a.length;h<r;h++)if(a[h].year===b&&a[h].month===d){var l=_.clone(a[h]);l.group=e;l.type="event";l.id=h;c[c.length]=l}return c}function k(a,d,c,r,w){function l(a,d,c){function r(a,d,c){var n=function(){return _.clone(k)},l=e.calendar(d,c),g={sunday:0,sun:0,"\u65e5\u66dc\u65e5":0,monday:1,mon:1,"\u6708\u66dc\u65e5":1,
tuesday:2,tue:2,"\u706b\u66dc\u65e5":2,wednesday:3,wed:3,"\u6c34\u66dc\u65e5":3,thursday:4,thu:4,"\u6728\u66dc\u65e5":4,friday:5,fri:5,"\u91d1\u66dc\u65e5":5,saturday:6,sat:6,"\u571f\u66dc\u65e5":6},x={January:0,Jan:0,"\u7766\u6708":0,February:1,Feb:1,"\u5982\u6708":1,March:2,Mar:2,"\u5f25\u751f":2,April:3,Apr:3,"\u536f\u6708":3,May:4,"\u7690\u6708":4,June:5,Jun:5,"\u6c34\u7121\u6708":5,July:6,Jul:6,"\u6587\u6708":6,August:7,Aug:7,"\u8449\u6708":7,September:8,Sep:8,"\u9577\u6708":8,October:9,Oct:9,
"\u795e\u7121\u6708":9,November:10,Nov:10,"\u971c\u6708":10,December:11,Dec:11,"\u5e2b\u8d70":11};if(v[d-MEMO_LIMIT])if(v[d-MEMO_LIMIT][c]){if(v[d-MEMO_LIMIT][c][a])return _.clone(v[d-MEMO_LIMIT][c][a])}else v[d-MEMO_LIMIT][c]={};else v[d-MEMO_LIMIT]=[],v[d-MEMO_LIMIT][c]={};var m=a.split(":")[0],f=a.split(":").slice(1).join(":"),q=[];if("not"===m)if(q=n(),"public-holiday"===f||"\u795d\u65e5"===f){n=h(0,d,c);f=0;for(l=n.length;f<l;f++)n[f]=n[f].date;q=_.difference(q,n);v[d-MEMO_LIMIT][c][a]=_.clone(q)}else if(0===
f.indexOf("year")||0===f.indexOf("month")||0===f.indexOf("date")||0===f.indexOf("day"))f=f.replace(/=/,":"),q=_.difference(n(),r(f,d,c));else{var y=f.split("=")[0],z=f.replace(/^.+?=/,""),z=z.replace(/^"(.+)"$/,"$1");_.each(w,function(a){if(a[y]===z||0===a[y].indexOf("[mes]")&&a[y].slice(5)===z)q=_.without(q,a.date)})}else if("range"===m)if(".."===f.slice(0,2))f="..."===f.slice(0,3)?f.slice(3):f.slice(2),q=n(),f=f.split("/"),p=new Date(parseInt(f[0],10),parseInt(f[1],10)-1,parseInt(f[2],10)),p.getFullYear()<
d||p.getFullYear()==d&&p.getMonth()<c?q=[]:p.getFullYear()==d&&p.getMonth()==c?(q=n(),q=_.filter(q,function(a){return a<=p.getDate()})):q=n();else if(".."===f.slice(-2))f="..."===f.slice(-3)?f.slice(0,-3):f.slice(0,-2),f=f.split("/"),s=new Date(parseInt(f[0],10),parseInt(f[1],10)-1,parseInt(f[2],10)),s.getFullYear()>d||s.getFullYear()==d&&s.getMonth()>c?q=[]:s.getFullYear()==d&&s.getMonth()==c?(q=n(),q=_.filter(q,function(a){return a>=s.getDate()})):q=n();else if(-1!==f.indexOf("..")){q=n();f=f.split("...");
1===f.length&&(f=f[0].split(".."));var l=[],g=[],s=f[0],p=f[1],f=p.substr(p.length-4,4),g=p.substr(p.length-5,5),s=s.split("/"),s=new Date(parseInt(s[0],10),parseInt(s[1],10)-1,parseInt(s[2],10));s.getFullYear()>d||s.getFullYear()==d&&s.getMonth()>c?l=[]:s.getFullYear()==d&&s.getMonth()==c?(l=n(),l=_.filter(l,function(a){return a>=s.getDate()})):l=n();"date"===f||"week"===f||"year"===f||"dates"===g||"weeks"===g||"years"===g?(x="date"===f||"week"===f||"year"===f?parseInt(p.substring(0,p.length-4),
10):parseInt(p.substring(0,p.length-5),10),p=new Date(s.getTime()),"date"===f||"dates"===g?p.setDate(p.getDate()+x):"week"===f||"weeks"===g?p.setDate(p.getDate()+7*x):"year"!==f&&"years"!==g||p.setFullYear(p.getFullYear()+x)):(p=p.split("/"),p=new Date(parseInt(p[0],10),parseInt(p[1],10)-1,parseInt(p[2],10)));p.getFullYear()<d||p.getFullYear()==d&&p.getMonth()<c?g=[]:p.getFullYear()==d&&p.getMonth()==c?(g=n(),g=_.filter(g,function(a){return a<=p.getDate()})):g=n();q=_.intersection(l,g)}else b("invalid selector.");
else if("from"!==m&&"to"!==m)if("date"===m)q[q.length]=parseInt(f,10);else if("month"===m)if(!x[f]&&parseInt(f,10)!=c+1||x[f]&&x[f]!=c)q=[];else{if(!x[f]&&parseInt(f,10)==c+1||x[f]&&x[f]==c)q=n()}else if("day"===m)if(f.match(/^\d/)){for(var f=f.match(/^(\d+)(?:st|nd|rd|th)-?(.+)$/),n=parseInt(f[1],10),t=g[f[2]],f=0;""===l[f][t];)f++;q[q.length]=l[f-1+n][t]}else t=g[f],_.some(l,function(a){""!==a[t]&&(q[q.length]=a[t])});else"year"===m?"leap-year"===f||"leap_year"===f||"\u3046\u308b\u3046\u5e74"===
f||"\u958f\u5e74"===f?(console.log("leap year"),q=0===d%400||0===d%4&&0!==d%100?n():[]):q=parseInt(f,10)!==d?[]:n():b('undefined key "'+m+'".');"day"===m&&(v[d-MEMO_LIMIT][c][a]=_.clone(q));return q}var n=[],k=_.flatten(e.calendar(d,c));_.each(a,function(a){1===a[1]?n[n.length]=r(a[0],d,c):0===a[1]&&("&&"===a[0]?n.push(_.intersection(n.pop(),n.pop())):"||"===a[0]?n.push(_.union(n.pop(),n.pop())):b("undefined operator "+a[0]))});1!=n.length&&(console.log(n),b("unexpected error in execSelectors()."));
return n.pop()}if(!a)return[];for(var g=[],k=0,y=a.length;k<y;k++){a[k].type="habit";a[k].group=r;var t=l(m(a[k].selector),d,c);_.each(t,function(b,e){t[e]={year:d,month:c,date:b,name:a[k].name,group:r,id:k,type:"habit"}});g=g.concat(t)}return g}function m(a){function b(a){""!==a[0]&&(d[d.length]=a)}if(t[a])return t[a];for(var d=[],c=!1,e=0,h=0,r=a.length;h<r;h++){var l=a.charAt(h);if(c)'"'===l?c=!1:"\\"===l&&(h+=1);else if('"'===l)c=!0;else if(" "===l){b([a.substring(e,h),1]);var l={" and ":"&&",
" \u304b\u3064 ":"&&"," && ":"&&"," or ":"||"," \u307e\u305f\u306f ":"||"," || ":"||"},g=!1,k;a:for(k in l)if(a.substr(h,k.length)===k){b([l[k],0]);e=h+k.length;h+=k.length;g=!0;break a}g||(b(["&&",0]),e=h+1,h+=1)}else if("("===l||")"===l)b([a.substring(e,h),1]),b([l,"("===l?2:3]),e=h+1}""!==a.substring(e)&&b([a.substring(e),1]);return t[a]=u(d)}function u(a){for(var d=[],c=[],e={"||":0,"&&":1},h=0,r=a.length;h<r;h++)if(1===a[h][1])c[c.length]=a[h].concat();else if(0===a[h][1]){var l=a[h][0];d[d.length-
1]&&e[l]<=e[d[d.length-1][0]]&&(c[c.length]=d.pop());d[d.length]=a[h]}else if(2===a[h][1])d[d.length]=a[h];else if(3===a[h][1]){for(;2!=d[d.length-1][1];)c[c.length]=d.pop(),0===d.length&&b("found mismatched parentheses");d.pop()}for(;0<d.length;)2===d[d.length-1][1]&&b("found mismatched parentheses."),c[c.length]=d.pop();return c}var v=[],t={},r=[],l=-1,y=-1;return{eventCalendar:function(a){var b=[],c=[],g=_.difference(d.following,d.hiddenGroup);if(e.year!==l||e.month!==y)l=e.year,y=e.month,r=[];
else if(_.any(g,function(a){return!0===a.updated})||d.updated)r=[];else return r[a]||[];for(var k=0,m=g.length;k<m;k++)b[b.length]=h(g[k],e.year,e.month);d.isHiddenGroup(-1)||(b[b.length]=h("private",e.year,e.month));k=0;for(m=b.length;k<m;k++)for(var g=0,v=b[k].length;g<v;g++)c[b[k][g].date]||(c[b[k][g].date]=[]),c[b[k][g].date][c[b[k][g].date].length]=b[k][g].id+":"+b[k][g].group+":"+b[k][g].type;r=_.clone(c);return r[a]||[]},splitSelector:m}}]);angular.module(appName).controller("eventEditor",["$scope","group","user","eventForm","calF","db","$mdToast",function(a,d,e,c,b,h,g){function k(b){"private"===b?e.save():h.post(a.group[b],b,"update")}var m=[],u=[];a.group=d;a.user=e;a.eventForm=c;a.calF=b;a.ruleWriterFase="";a.ruleInput="";a.eventEditor={rules:"",selectedGroup:""};a.addEvent=function(){var b=a.eventForm.type;if(""!==c.name&&void 0!==c.selectedGroup&&null!==c.selectedGroup){var d=new Date(c.year,c.month-1,c.date);if(d.getFullYear()===
parseInt(c.year,10)&&d.getMonth()===parseInt(c.month,10)-1&&d.getDate()===parseInt(c.date,10)){if("event"==b)var e={year:c.year,month:c.month-1,date:c.date,name:c.name};else"habit"==b&&(e={selector:c.rule,name:c.name});"private"===c.selectedGroup?(a.user["private"][b][a.user["private"][b].length]=e,a.user.updated=!0):null!==c.selectedGroup&&(a.group[c.selectedGroup][b][a.group[c.selectedGroup][b].length]=e,a.group[c.selectedGroup].updated=!0);g.show(g.simple().content("\u30a4\u30d9\u30f3\u30c8\u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f").position("top right"));
c.isEditMode=!1;k(c.selectedGroup)}}};a.saveEvent=function(){var b=c.type;if(null!==c.year&&null!==c.month&&null!==c.date&&""!==c.name){var d=new Date(c.year,c.month-1,c.date);if(d.getFullYear()===parseInt(c.year,10)&&d.getMonth()===parseInt(c.month,10)-1&&d.getDate()===parseInt(c.date,10)){if("private"===c.selectedGroup)var e=a.user["private"][b][c.id];else null!==c.selectedGroup&&(e=a.group[c.selectedGroup][b][c.id],a.group[c.selectedGroup].updated=!0);"event"==b?(e.year=c.year,e.month=c.month-
1,e.date=c.date,e.name=c.name):"habit"==b&&(e.selector=c.rule,e.name=c.name);c.isEditMode=!1;k(c.selectedGroup)}}};a.cancel=function(){c.isEditMode=!1};a.goFase=function(b,d){m[m.length]=a.ruleWriterFase;u[u.length]=d||b;a.ruleWriterFase=b;c.rule=u.join("")};a.cancelFase=function(){a.ruleWriterFase=m.pop();u.pop();c.rule=u.join("")};a.finishWritingRule=function(){a.ruleWriterFase="";m=[];c.rule=u.join("");u=[]};a.startWritingRule=function(){a.ruleWriterFase="selector";m=[];u=[]}}]);angular.module(appName).controller("groupEditor",["$scope","group","groupForm","db","$mdToast",function(a,d,e,c,b){a.groupForm=e;a.groupForm.parentGroup=[null];a.groupForm.mode="add";a.group=d;a.finishMakingAGroup=function(){e.isEditMode=!1};a.addGroup=function(){var e=a.groupForm.parentGroup.reduce(function(a,b){-1===a.indexOf(b)&&(a[a.length]=angular.isNumber(b)?parseInt(b,10):"");return a},[]),g={event:[],habit:[],name:a.groupForm.name,updated:!0};""!==e.join("")&&(g.parents=e);d[d.length]=g;c.post(g,
a.group.length-1,"insert").success(a.finishMakingAGroup);b.show(b.simple().content("\u30b0\u30eb\u30fc\u30d7 "+a.groupForm.name+" \u3092\u4f5c\u6210\u3057\u307e\u3057\u305f").position("top right"));a.groupForm.name=""}}]);angular.module(appName).controller("detail",["$scope","eventForm","user","group",function(a,d,e,c){a.switchToEdit=function(){arguments=Array.prototype.slice.call(arguments);if(1===arguments.length){var b=arguments[0];a.eventForm.mode="edit";b=b.split(":");d.type=b[2];d.id=b[0];d.selectedGroup="private"!==b[1]?parseInt(b[1],10):b[1];"event"===b[2]?"private"===b[1]?(d.year=e["private"].event[b[0]].year,d.month=e["private"].event[b[0]].month+1,d.date=e["private"].event[b[0]].date,d.name=e["private"].event[b[0]].name):
(d.year=c[b[1]].event[b[0]].year,d.month=c[b[1]].event[b[0]].month+1,d.date=c[b[1]].event[b[0]].date,d.name=c[b[1]].event[b[0]].name):"habit"===b[2]&&("private"===b[1]?(d.rule=e["private"].habit[b[0]].selector,d.name=e["private"].habit[b[0]].name):(d.rule=c[b[1]].habit[b[0]].selector,d.name=c[b[1]].habit[b[0]].name))}else 2===arguments.length&&!0===arguments[1]?(b=arguments[0],a.eventForm.mode="add",b=b.split(":"),d.type=b[2],d.id=0,d.selectedGroup="private"!==b[1]?parseInt(b[1],10):b[1],"event"===
b[2]?"private"===b[1]?(d.year=e["private"].event[b[0]].year,d.month=e["private"].event[b[0]].month+1,d.date=e["private"].event[b[0]].date,d.name=e["private"].event[b[0]].name):(d.year=c[b[1]].event[b[0]].year,d.month=c[b[1]].event[b[0]].month+1,d.date=c[b[1]].event[b[0]].date,d.name=c[b[1]].event[b[0]].name):"habit"===b[2]&&("private"===b[1]?(d.rule=e["private"].habit[b[0]].selector,d.name=e["private"].habit[b[0]].name):(d.rule=c[b[1]].habit[b[0]].selector,d.name=c[b[1]].habit[b[0]].name))):3===arguments.length&&
(d.mode="add",d.type="event",d.rule="",d.id=0,d.name="",d.year=arguments[0],d.month=arguments[1]+1,d.date=arguments[2]);a.eventForm.isEditMode=!0}}]);angular.module(appName).controller("setting",["$scope","group","user","db","eventListToEdit","groupForm","$mdSidenav","$mdToast","$mdDialog",function(a,d,e,c,b,h,g,k,m){function u(a,b){return a-b}function v(b){return-1!==a.user.following.indexOf(b)}function t(a){if(!d[a].parents)return[];for(var b=d[a].parents,c=0,e=d[a].parents.length;c<e;c++)b=t(d[a].parents[c]).concat(b);return b}a.group=d;a.user=e;a.groupForm=h;a.search_keyword="";a.searchResult=[];a.hide=function(a){e.hiddenGroup[e.hiddenGroup.length]=
a;e.hiddenGroup.sort(u);e.save()};a.show=function(b){e.hiddenGroup=_.without(a.user.hiddenGroup,b);e.save()};a.followsParent=function(a){a=t(a);for(var b=0,d=a.length;b<d;b++)if(!v(a[b]))return a[b];return!0};a.toggleNav=function(){console.log("called");g("left").close()};a.follows=v;a.follow=function(b){a.user.following[a.user.following.length]=b;a.user.following.sort(u);e.save();k.show(k.simple().content(d[b].name+"\u3092\u30d5\u30a9\u30ed\u30fc\u3057\u307e\u3057\u305f").position("top right"))};
a.unfollow=function(b){var c=[];c[c.length]=a.user.following.indexOf(b);for(var h=0,g=a.user.following.length;h<g;h++)if(d[a.user.following[h]].parents&&-1!=t(a.user.following[h]).indexOf(b)){if(!confirm("\u3053\u306e\u30b0\u30eb\u30fc\u30d7\u306e\u5b50\u30b0\u30eb\u30fc\u30d7("+d[a.user.following[h]].name+")\u3092\u30d5\u30a9\u30ed\u30fc\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u30b0\u30eb\u30fc\u30d7\u3092\u30d5\u30a9\u30ed\u30fc\u89e3\u9664\u3059\u308b\u3068\u3053\u3061\u3089\u3082\u89e3\u9664\u306b\u306a\u308a\u307e\u3059\u3002\u3088\u308d\u3057\u3044\u3067\u3059\u304b?"))return;
c[c.length]=h}c.sort(function(a,b){return b-a});h=0;for(g=c.length;h<g;h++)a.user.following.splice(c[h],1);e.save()};a.showEventList=function(a){b.id=a};a.makeAGroup=function(){h.isEditMode=!0;g("left").close()};a.search=function(){var b=[];if(""==a.search_keyword)return b;for(var c=0,e=d.length;c<e&&!(30<b.length);c++)-1!==d[c].name.indexOf(a.search_keyword)&&(b[b.length]=c);a.searchResult=b};a.randomSearch=function(){var b=[];if(5>d.length)Array.prototype.push.apply(b,d);else for(;5>b.length;){var c=
Math.random()*d.length|0;-1===_.indexOf(b,c)&&(b[b.length]=c)}a.searchResult=b};a.hideAll=function(){e.hiddenGroup.length=0;e.hiddenGroup=_.clone(e.following);e.hiddenGroup[e.hiddenGroup.length]=-1;e.hiddenGroup.sort(u);e.save()};a.showAll=function(){e.hiddenGroup=[];e.save()};a.importSetting=function(){m.show({controller:function(a,b){a.text="";a.answer=function(a){b.hide(a)}},template:'<md-dialog><md-content>\u30b3\u30d4\u30fc\u3057\u305f\u30c7\u30fc\u30bf\u3092\u8cbc\u308a\u4ed8\u3051\u3066\u304f\u3060\u3055\u3044\u3002<br><input ng-model="text"><md-button ng-click="answer(text)">ok</md-button></md-content></md-dialog>'}).then(function(a){a=
JSON.parse(a);for(var b in a)e[b]=a[b];e.save()})};a.exportSetting=function(){m.show(m.alert().title("").content("\u3053\u308c\u3092\u30b3\u30d4\u30fc\u3057\u3066\u79fb\u884c\u5148\u3067\u8cbc\u308a\u4ed8\u3051\u3066\u304f\u3060\u3055\u3044\u3002"+angular.toJson(e)).ok("ok"))}}]).directive("autoFocus",function(){return{link:function(a,d,e){a.$watch("focus",function(c){!0===a.focus&&d[0].focus()})}}});angular.module(appName).controller("eventList",["$scope","group","user","eventListToEdit","eventForm",function(a,d,e,c,b){a.eventList=c;a.group=d;a.switchToEdit=function(){arguments=Array.prototype.slice.call(arguments);if(1===arguments.length){var c=arguments[0];a.eventForm.mode="edit";c=c.split(":");b.type=c[2];b.id=c[0];b.selectedGroup="private"!==c[1]?parseInt(c[1],10):c[1];"event"===c[2]?"private"===c[1]?(b.year=e["private"].event[c[0]].year,b.month=e["private"].event[c[0]].month+1,b.date=e["private"].event[c[0]].date,
b.name=e["private"].event[c[0]].name):(b.year=d[c[1]].event[c[0]].year,b.month=d[c[1]].event[c[0]].month+1,b.date=d[c[1]].event[c[0]].date,b.name=d[c[1]].event[c[0]].name):"habit"===c[2]&&("private"===c[1]?(b.rule=e["private"].habit[c[0]].selector,b.name=e["private"].habit[c[0]].name):(b.rule=d[c[1]].habit[c[0]].selector,b.name=d[c[1]].habit[c[0]].name))}else 2===arguments.length&&!0===arguments[1]?(c=arguments[0],a.eventForm.mode="add",c=c.split(":"),b.type=c[2],b.id=0,b.selectedGroup="private"!==
c[1]?parseInt(c[1],10):c[1],"event"===c[2]?"private"===c[1]?(b.year=e["private"].event[c[0]].year,b.month=e["private"].event[c[0]].month+1,b.date=e["private"].event[c[0]].date,b.name=e["private"].event[c[0]].name):(b.year=d[c[1]].event[c[0]].year,b.month=d[c[1]].event[c[0]].month+1,b.date=d[c[1]].event[c[0]].date,b.name=d[c[1]].event[c[0]].name):"habit"===c[2]&&("private"===c[1]?(b.rule=e["private"].habit[c[0]].selector,b.name=e["private"].habit[c[0]].name):(b.rule=d[c[1]].habit[c[0]].selector,b.name=
d[c[1]].habit[c[0]].name))):3===arguments.length&&(b.mode="add",b.type="event",b.rule="",b.id=0,b.name="",b.year=arguments[0],b.month=arguments[1]+1,b.date=arguments[2]);a.eventForm.isEditMode=!0}}]);angular.module(appName).factory("user",["$rootScope",function(a){if(localStorage&&angular.fromJson(localStorage.getItem("private"))){var d=angular.fromJson(localStorage.getItem("private"));d.isHiddenGroup=function(a){return-1!==_.indexOf(this.hiddenGroup,a,!0)};d.save=function(){a.$broadcast("updated");localStorage.setItem("private",angular.toJson(this))};d.updated=!0}else d={following:[],"private":{event:[],habit:[],name:"\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8"},hiddenGroup:[],isHiddenGroup:function(a){return-1!==
_.indexOf(this.hiddenGroup,a,!0)},save:function(){a.$broadcast("updated");localStorage.setItem("private",angular.toJson(this))}};d.save();return d}]).factory("eventForm",function(){return{isEditMode:!1,name:"",year:(new Date).getFullYear(),month:(new Date).getMonth()+1,date:(new Date).getDate(),type:"event",rule:""}}).factory("groupForm",function(){return{isEditMode:!1,name:""}}).factory("group",["$http",function(a){return[{id:0,event:[{name:"[mes]\u6625\u5206\u306e\u65e5",year:2E3,month:2,date:20},
{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2E3,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2001,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2001,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2002,month:2,date:21},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2002,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2003,month:2,date:21},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2003,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2004,
month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2004,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2005,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2005,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2006,month:2,date:21},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2006,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2007,month:2,date:21},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2007,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",
year:2008,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2008,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2009,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2009,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2010,month:2,date:21},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2010,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2011,month:2,date:21},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2011,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",
year:2012,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2012,month:8,date:22},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2013,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2013,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2014,month:2,date:21},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2014,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2015,month:2,date:21},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2015,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",
year:2016,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2016,month:8,date:22},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2017,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2017,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2018,month:2,date:21},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2018,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2019,month:2,date:21},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2019,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",
year:2020,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2020,month:8,date:22},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2021,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2021,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2022,month:2,date:21},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2022,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2023,month:2,date:21},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2023,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",
year:2024,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2024,month:8,date:22},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2025,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2025,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2026,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2026,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2027,month:2,date:21},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2027,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",
year:2028,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2028,month:8,date:22},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2029,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2029,month:8,date:23},{name:"[mes]\u6625\u5206\u306e\u65e5",year:2030,month:2,date:20},{name:"[mes]\u79cb\u5206\u306e\u65e5",year:2030,month:8,date:23},{name:"[mes]\u5341\u4e94\u591c",year:2E3,month:8,date:12},{name:"[mes]\u5341\u4e94\u591c",year:2001,month:9,date:1},{name:"[mes]\u5341\u4e94\u591c",year:2002,
month:8,date:21},{name:"[mes]\u5341\u4e94\u591c",year:2003,month:8,date:11},{name:"[mes]\u5341\u4e94\u591c",year:2004,month:8,date:28},{name:"[mes]\u5341\u4e94\u591c",year:2005,month:8,date:18},{name:"[mes]\u5341\u4e94\u591c",year:2006,month:9,date:6},{name:"[mes]\u5341\u4e94\u591c",year:2007,month:8,date:25},{name:"[mes]\u5341\u4e94\u591c",year:2008,month:8,date:14},{name:"[mes]\u5341\u4e94\u591c",year:2009,month:9,date:3},{name:"[mes]\u5341\u4e94\u591c",year:2010,month:8,date:22},{name:"[mes]\u5341\u4e94\u591c",
year:2011,month:8,date:12},{name:"[mes]\u5341\u4e94\u591c",year:2012,month:8,date:30},{name:"[mes]\u5341\u4e94\u591c",year:2013,month:8,date:19},{name:"[mes]\u5341\u4e94\u591c",year:2014,month:8,date:8},{name:"[mes]\u5341\u4e94\u591c",year:2015,month:8,date:27},{name:"[mes]\u5341\u4e94\u591c",year:2016,month:8,date:15}],habit:[{name:"[mes]\u5143\u65e6",selector:"month:1 date:1"},{name:"[mes]\u6210\u4eba\u306e\u65e5",selector:"month:1 day:2nd-mon"},{name:"[mes]\u662d\u548c\u306e\u65e5",selector:"month:4 date:29"},
{name:"[mes]\u5efa\u56fd\u8a18\u5ff5\u65e5",selector:"month:2 date:11"},{name:"[mes]\u61b2\u6cd5\u8a18\u5ff5\u65e5",selector:"month:5 date:3"},{name:"[mes]\u307f\u3069\u308a\u306e\u65e5",selector:"month:5 date:4"},{name:"[mes]\u3053\u3069\u3082\u306e\u65e5",selector:"month:5 date:5"},{name:"[mes]\u6d77\u306e\u65e5",selector:"month:7 day:3rd-mon"},{name:"[mes]\u656c\u8001\u306e\u65e5",selector:"month:9 day:3rd-mon"},{name:"[mes]\u4f53\u80b2\u306e\u65e5",selector:"month:10 day:2nd-mon"},{name:"[mes]\u6587\u5316\u306e\u65e5",
selector:"month:11 date:3"},{name:"[mes]\u52e4\u52b4\u611f\u8b1d\u306e\u65e5",selector:"month:11 date:23"},{name:"[mes]\u5929\u7687\u8a95\u751f\u65e5",selector:"month:12 date:23"}],name:"\u795d\u65e5",updated:!0}]}]).factory("calF",function(){var a=new Date,d=[];return{year:a.getFullYear(),month:a.getMonth(),date:a.getDate(),calendar:function(a,c){if(d[a-MEMO_LIMIT]){if(d[a-MEMO_LIMIT][c])return d[a-MEMO_LIMIT][c]}else d[a-MEMO_LIMIT]=[];var b=(new Date(a,c,1)).getDay(),h=[31,28,31,30,31,30,31,31,
30,31,30,31][c];1===c&&(0==a%400||0!=a%100&&0==a%4)&&(h=29);var g=[];g.year=a;g.month=c;var k=0;for(;;){g[k]=[];for(var m=1;7>=m;m++)g[k][g[k].length]=0<7*k+m-b?7*k+m-b<=h?7*k+m-b:32:0;if(g[k][g[k].length-1]>=h)break;k++}return d[a-MEMO_LIMIT][c]=g},today:{year:a.getFullYear(),month:a.getMonth(),date:a.getDate()},selected:a.getDate(),selectedDay:function(){return null==this.selected?"":"\u65e5\u6708\u706b\u6c34\u6728\u91d1\u571f".split("")[(new Date(this.year,this.month,this.selected)).getDay()]},
disableHoverEvent:isSmartPhone}}).factory("eventListToEdit",function(){return{id:""}}).run(["$timeout",function(a){function d(){var c=new Date;c.setDate(c.getDate()+1);c.setHours(0);c.setMinutes(0);c.setSeconds(0);c.setMilliseconds(0);var b=new Date;$scope.calF.today.year=b.getFullYear();$scope.calF.today.month=b.getMonth();$scope.calF.today.date=b.getDate();a(d,c-new Date)}var e=new Date;e.setDate(e.getDate()+1);e.setHours(0);e.setMinutes(0);e.setSeconds(0);e.setMilliseconds(0);a(d,e-new Date)}]).factory("db",
["group","user","$http","$rootScope",function(a,d,e,c){return{post:function(a,d,g){a=_.clone(a);a.id=d;a.permission=a.permission||[];a.parents=a.parents||"";delete a.updated;for(var k in a)a[k]=angular.toJson(a[k]);a.type=g;c.$broadcast("updated");return e.post("http://www40.atpages.jp/chatblanc/genderC/database.php",a).success(function(a){console.log("updated");console.log(a)}).error(function(a){console.log(a)})},list:function(){return e.post("http://www40.atpages.jp/chatblanc/genderC/database.php",
{type:"list",groupID:d.following.join(",")}).success(function(a){return a}).error(function(a){console.log(a)})},getNameList:function(){return e.post("http://www40.atpages.jp/chatblanc/genderC/database.php",{type:"namelist"}).success(function(a){return a})}}}]);
